(()=>{var e={};e.id=947,e.ids=[947],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5514:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=r(482),s=r(9108),i=r(2563),n=r.n(i),l=r(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["rooms",{children:["[roomId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3052)),"/Users/wginsber/Desktop/projects/pick-duel-clean/app/rooms/[roomId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2917)),"/Users/wginsber/Desktop/projects/pick-duel-clean/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/wginsber/Desktop/projects/pick-duel-clean/app/rooms/[roomId]/page.tsx"],m="/rooms/[roomId]/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/rooms/[roomId]/page",pathname:"/rooms/[roomId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},79:(e,t,r)=>{Promise.resolve().then(r.bind(r,3889))},3889:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(2295),s=r(3729),i=r(2254),n=r(9419);function l({onSubmit:e,disabled:t=!1,category:r}){let{user:i,room:l}=(0,n.gT)(),[o,c]=(0,s.useState)(["","",""]),[d,m]=(0,s.useState)(["","",""]),u=(e,t)=>{let r=[...o];r[e]=t,c(r);let a=[...d];a[e]="",m(a)},h=()=>{let e=["","",""],t=!0;o.forEach((r,a)=>{r.trim()?r.trim().length<2?(e[a]="Must be at least 2 characters",t=!1):r.trim().length>50&&(e[a]="Must be less than 50 characters",t=!1):(e[a]="This field is required",t=!1)});let r=o.map(e=>e.trim().toLowerCase());return new Set(r).size!==r.length&&(e.forEach((t,r)=>{e[r]||(e[r]="Duplicate options are not allowed")}),t=!1),m(e),t};return(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:`Enter Your 3 ${r&&"custom"===r.toLowerCase()?r:r&&"custom"!==r.toLowerCase()?r.charAt(0).toUpperCase()+r.slice(1):"Options"}`}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Put up your best options for voting"})]}),a.jsx("div",{className:"space-y-4",children:o.map((e,r)=>(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:e,onChange:e=>u(r,e.target.value),placeholder:`Option ${r+1}`,disabled:t,className:`
                w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent
                transition-all duration-200
                ${d[r]?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}
                ${t?"opacity-50 cursor-not-allowed":""}
              `}),d[r]&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:d[r]})]},r))}),a.jsx("button",{onClick:()=>{h()&&e(o.map(e=>e.trim()))},disabled:t||o.some(e=>!e.trim()),className:`
          w-full py-3 px-6 rounded-lg font-semibold text-white
          transition-all duration-200 transform hover:scale-105
          ${t||o.some(e=>!e.trim())?"bg-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 shadow-lg hover:shadow-xl"}
        `,children:t?"Waiting for other player...":"Submit Options"})]})}var o=r(8584);function c({player:e,label:t,isCurrent:r,isSelf:s,options:i,eliminated:n,onEliminate:l,disabled:c=!1,eliminationAck:d,revealElimination:m,flashOption:u,category:h="custom",playerNumber:x=1}){let p=(0,o.bK)(h,x);return(0,a.jsxs)("div",{className:`
      bg-white rounded-lg p-4 shadow-md border-2 transition-all duration-200
      ${r?"border-primary-500":"border-gray-200"}
      ${r?"animate-pulse-glow":""}
      ${c?"opacity-60":""}
    `,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-gray-200 text-lg bg-gray-100",children:p}),s&&a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary-500 rounded-full border border-white"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-800 text-sm truncate",children:[t,s&&a.jsx("span",{className:"text-primary-600 ml-1",children:"(You)"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:r?"Your turn":"Waiting..."})]})]}),i.length>0&&a.jsx("div",{className:"space-y-1",children:i.map((e,t)=>{let r=n.includes(e),s=u===e;return a.jsx("div",{className:`
                  px-2 py-1 rounded text-xs transition-all duration-300
                  ${s?"bg-yellow-200 border-yellow-400 animate-flash":""}
                  ${r&&!s?"bg-gray-100 text-gray-500 line-through":r||s?"":"bg-green-100 text-green-700"}
                `,children:e},t)})}),e.vote&&(0,a.jsxs)("div",{className:"mt-3 p-2 bg-blue-100 rounded text-xs",children:[a.jsx("p",{className:"font-medium text-blue-800",children:"Voted for:"}),a.jsx("p",{className:"text-blue-700",children:e.vote})]})]})}function d(){let e;let{room:t,user:r,eliminateOption:i,acknowledgeEliminationReveal:l,loading:d}=(0,n.gT)(),[m,u]=(0,s.useState)(null);if((0,s.useEffect)(()=>{if(t&&t.revealElimination?.option){u(t.revealElimination.option);let e=setTimeout(()=>{u(null)},700);return()=>clearTimeout(e)}},[t?.revealElimination?.option]),!t||!r)return null;let h=(0,o.yu)(t),x=h===r.uid;(0,o.oK)(t,h||"");let p=(0,o.RC)(t.eliminationStep),g=async e=>{x&&!d&&await i(e)},b=async()=>{d||await l()},f=t.createdBy,y=Object.keys(t.players).find(e=>e!==f)||"",v=t.players[f],w=t.players[y],j=t.revealElimination&&!t.eliminationAck?.[r.uid],N=t.eliminationAck&&Object.values(t.eliminationAck).every(Boolean),M=t.revealElimination&&!N;return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Elimination Phase"}),a.jsx("p",{className:"text-gray-600 mb-4",children:p}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:a.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:{width:`${t.eliminationStep/4*100}%`}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Step ",t.eliminationStep," of 4"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c,{player:v,label:`${v.displayName.split(" ")[0]} – Player 1`,isCurrent:h===f,isSelf:r?.uid===f,options:v.options,eliminated:v.eliminated,onEliminate:g,disabled:h!==f||r?.uid!==f,eliminationAck:void 0,revealElimination:void 0,flashOption:m,category:t.category,playerNumber:1}),w?a.jsx(c,{player:w,label:`${w.displayName.split(" ")[0]} – Player 2`,isCurrent:h===y,isSelf:r?.uid===y,options:w.options,eliminated:w.eliminated,onEliminate:g,disabled:h!==y||r?.uid!==y,eliminationAck:void 0,revealElimination:void 0,flashOption:m,category:t.category,playerNumber:2}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[120px] bg-gray-50 rounded-lg border-2 border-dashed border-gray-200 text-gray-400",children:[a.jsx("span",{className:"text-lg font-semibold mb-2",children:"Waiting for Player 2..."}),a.jsx("span",{className:"text-xs",children:"Share the room link to invite a friend!"})]})]}),x&&!M&&w&&3===w.options.length&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border-2 border-primary-500",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Choose an option to eliminate:"}),a.jsx("div",{className:"grid gap-3",children:(e=1===t.eliminationStep?w:2===t.eliminationStep?v:3===t.eliminationStep?v:4===t.eliminationStep?w:null)?e.options.map(t=>{let r=e.eliminated.includes(t),s=m===t;return a.jsx("button",{onClick:()=>g(t),disabled:d||r,className:`
                      p-4 rounded-lg border-2 transition-all duration-200
                      ${s?"bg-yellow-200 border-yellow-400 animate-flash":""}
                      ${r&&!s?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed line-through":r||s?"":"bg-red-50 border-red-300 hover:bg-red-100 hover:border-red-400 text-red-700 font-medium hover:scale-105 hover:shadow-lg"}
                    `,children:t},t)}):null})]}),!x&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"animate-pulse text-blue-600",children:["Waiting for ",t.players[h||""]?.displayName?.split(" ")[0]||"other player"," to make their choice..."]})})}),d&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Processing..."})]}),j&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:"Elimination Revealed!"}),(0,a.jsxs)("p",{className:"text-yellow-700 mb-4",children:[a.jsx("strong",{children:t.players[t.revealElimination.by]?.displayName})," eliminated: ",a.jsx("strong",{children:t.revealElimination.option})]}),a.jsx("button",{onClick:b,disabled:d,className:"bg-yellow-600 text-white px-6 py-2 rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:d?"Processing...":"Acknowledge"})]}),t.revealElimination&&!j&&!N&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center",children:a.jsx("div",{className:"animate-pulse text-blue-600",children:"Waiting for other player to acknowledge the elimination..."})})]})}function m(){let{room:e,user:t,vote:r,loading:s}=(0,n.gT)();if(!e||!t)return null;let i=e.players[t.uid],l=i?.vote!==null,c=(e.voteRound||1)>1,d=!!e.randomWinner,m=e.votingTurn===t.uid,u=e.createdBy,h=Object.keys(e.players).find(e=>e!==u)||"";e.players[u],e.players[h];let x=e.finalOptions,p={};for(let t of Object.keys(e.players)){let r=e.players[t],a=r.options.filter(e=>!r.eliminated.includes(e));1===a.length&&(p[a[0]]=t)}let g=2===x.length,b=Object.values(e.players).every(e=>null!==e.vote),f=g?!l:m&&!l,y=async e=>{l||s||await r(e)};return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:g?"Final Vote":"Vote"}),a.jsx("p",{className:"text-gray-600",children:g?"Vote for your favorite from the two remaining options below":"Vote for your favorite option"}),a.jsx("div",{className:"mt-2 text-sm text-blue-700",children:g?"Simultaneous voting - both players vote at the same time!":c?"Revote: You disagreed! Try again.":"First vote"})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:x.map((t,r)=>{let n=p[t],l=e.players[n].displayName.split(" ")[0],c=`${l} – ${n===u?"Player 1":"Player 2"}`,d=!g||b,m=d&&i?.vote===t;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:c}),a.jsx("div",{className:`
                  w-full bg-white rounded-xl p-6 shadow-lg border-2 transition-all duration-200 cursor-pointer
                  ${m?"border-green-500 bg-green-50":"border-primary-500 hover:border-primary-600 hover:shadow-xl"}
                  ${!f||s?"opacity-60 cursor-not-allowed":""}
                `,onClick:f&&!s?()=>y(t):void 0,children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-3",children:(0,o.bK)(e.category||"custom",n===u?1:2)}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t}),d&&i?.vote===t&&a.jsx("div",{className:"text-green-600 font-semibold",children:"✓ Your Vote"}),d&&i?.vote&&i?.vote!==t&&a.jsx("div",{className:"text-gray-500 text-sm",children:"Not selected"})]})})]},n)})}),g?(0,a.jsxs)(a.Fragment,{children:[!l&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-yellow-700",children:"Please cast your vote by clicking one of the options above"})})}),l&&!b&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsx("div",{className:"animate-pulse text-blue-600",children:"Waiting for the other player to vote..."})})})]}):(0,a.jsxs)(a.Fragment,{children:[!m&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsx("div",{className:"animate-pulse text-blue-600",children:"Waiting for the other player to vote..."})})}),!l&&m&&!s&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-yellow-700",children:"Please cast your vote by clicking one of the options above"})})}),l&&!b&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsx("div",{className:"animate-pulse text-blue-600",children:"Waiting for other player to vote..."})})}),c&&!d&&!b&&a.jsx("div",{className:"text-center mt-4",children:a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsx("p",{className:"text-orange-700 font-semibold",children:"You disagreed! Please revote. If you disagree again, a random winner will be chosen."})})}),d&&a.jsx("div",{className:"text-center mt-4",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-700 font-semibold",children:"A random winner will be selected due to a stalemate!"})})})]}),s&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Processing vote..."})]})]})}var u={};!function e(t,r,a,s){var i,n,l,o,c,d,m,u,h,x,p,g=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),b="function"==typeof Path2D&&"function"==typeof DOMMatrix;function f(){}function y(e){var a=r.exports.Promise,s=void 0!==a?a:t.Promise;return"function"==typeof s?new s(e):(e(f,f),null)}var v=(i=function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),r=e.getContext("2d");r.fillRect(0,0,1,1);var a=e.transferToImageBitmap();try{r.createPattern(a,"no-repeat")}catch(e){return!1}return!0}(),n=new Map,{transform:function(e){if(i)return e;if(n.has(e))return n.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),n.set(e,t),t},clear:function(){n.clear()}}),w=(c=Math.floor(1e3/60),d={},m=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(l=function(e){var t=Math.random();return d[t]=requestAnimationFrame(function r(a){m===a||m+c-1<a?(m=a,delete d[t],e()):d[t]=requestAnimationFrame(r)}),t},o=function(e){d[e]&&cancelAnimationFrame(d[e])}):(l=function(e){return setTimeout(e,c)},o=function(e){return clearTimeout(e)}),{frame:l,cancel:o}),j=(x={},function(){if(u)return u;if(!a&&g){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{u=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return"function"==typeof console.warn&&console.warn("\uD83C\uDF8A Could not load worker",e),null}!function(e){function t(t,r){e.postMessage({options:t||{},callback:r})}e.init=function(t){var r=t.transferControlToOffscreen();e.postMessage({canvas:r},[r])},e.fire=function(r,a,s){if(h)return t(r,null),h;var i=Math.random().toString(36).slice(2);return h=y(function(a){function n(t){t.data.callback===i&&(delete x[i],e.removeEventListener("message",n),h=null,v.clear(),s(),a())}e.addEventListener("message",n),t(r,i),x[i]=n.bind(null,{data:{callback:i}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),x)x[t](),delete x[t]}}(u)}return u}),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function M(e,t,r){var a;return a=e&&null!=e[t]?e[t]:N[t],r?r(a):a}function C(e){return e<0?0:Math.floor(e)}function P(e){return parseInt(e,16)}function k(e){return e.map(S)}function S(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:P(t.substring(0,2)),g:P(t.substring(2,4)),b:P(t.substring(4,6))}}function E(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function T(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function I(e,r){var i,n=!e,l=!!M(r||{},"resize"),o=!1,c=M(r,"disableForReducedMotion",Boolean),d=g&&M(r||{},"useWorker")?j():null,m=n?E:T,u=!!e&&!!d&&!!e.__confetti_initialized,h="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function x(r){var x,p=c||M(r,"disableForReducedMotion",Boolean),g=M(r,"zIndex",Number);if(p&&h)return y(function(e){e()});n&&i?e=i.canvas:n&&!e&&((x=document.createElement("canvas")).style.position="fixed",x.style.top="0px",x.style.left="0px",x.style.pointerEvents="none",x.style.zIndex=g,e=x,document.body.appendChild(e)),l&&!u&&m(e);var f={width:e.width,height:e.height};function j(){if(d){var t={getBoundingClientRect:function(){if(!n)return e.getBoundingClientRect()}};m(t),d.postMessage({resize:{width:t.width,height:t.height}});return}f.width=f.height=null}function N(){i=null,l&&(o=!1,t.removeEventListener("resize",j)),n&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,u=!1)}return(d&&!u&&d.init(e),u=!0,d&&(e.__confetti_initialized=!0),l&&!o&&(o=!0,t.addEventListener("resize",j,!1)),d)?d.fire(r,f,N):function(t,r,n){for(var l,o,c,d,u,h,x,p=M(t,"particleCount",C),g=M(t,"angle",Number),f=M(t,"spread",Number),j=M(t,"startVelocity",Number),N=M(t,"decay",Number),P=M(t,"gravity",Number),S=M(t,"drift",Number),E=M(t,"colors",k),T=M(t,"ticks",Number),I=M(t,"shapes"),O=M(t,"scalar"),D=!!M(t,"flat"),$=((l=M(t,"origin",Object)).x=M(l,"x",Number),l.y=M(l,"y",Number),l),F=p,q=[],A=e.width*$.x,R=e.height*$.y;F--;)q.push(function(e){var t=e.angle*(Math.PI/180),r=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*r-Math.random()*r),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}({x:A,y:R,angle:g,spread:f,startVelocity:j,color:E[F%E.length],shape:I[Math.floor(Math.random()*(I.length-0))+0],ticks:T,decay:N,gravity:P,drift:S,scalar:O,flat:D}));return i?i.addFettis(q):(o=e,u=q.slice(),h=o.getContext("2d"),x=y(function(e){function t(){c=d=null,h.clearRect(0,0,r.width,r.height),v.clear(),n(),e()}c=w.frame(function e(){a&&!(r.width===s.width&&r.height===s.height)&&(r.width=o.width=s.width,r.height=o.height=s.height),r.width||r.height||(m(o),r.width=o.width,r.height=o.height),h.clearRect(0,0,r.width,r.height),(u=u.filter(function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var r,a,s,i,n,l,o,c,d,m,u,h,x,p,g,f=t.tick++/t.totalTicks,y=t.x+t.random*t.tiltCos,w=t.y+t.random*t.tiltSin,j=t.wobbleX+t.random*t.tiltCos,N=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-f)+")",e.beginPath(),b&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill((r=t.shape.path,a=t.shape.matrix,s=t.x,i=t.y,n=.1*Math.abs(j-y),l=.1*Math.abs(N-w),o=Math.PI/10*t.wobble,c=new Path2D(r),(d=new Path2D).addPath(c,new DOMMatrix(a)),(m=new Path2D).addPath(d,new DOMMatrix([Math.cos(o)*n,Math.sin(o)*n,-Math.sin(o)*l,Math.cos(o)*l,s,i])),m));else if("bitmap"===t.shape.type){var M=Math.PI/10*t.wobble,C=.1*Math.abs(j-y),P=.1*Math.abs(N-w),k=t.shape.bitmap.width*t.scalar,S=t.shape.bitmap.height*t.scalar,E=new DOMMatrix([Math.cos(M)*C,Math.sin(M)*C,-Math.sin(M)*P,Math.cos(M)*P,t.x,t.y]);E.multiplySelf(new DOMMatrix(t.shape.matrix));var T=e.createPattern(v.transform(t.shape.bitmap),"no-repeat");T.setTransform(E),e.globalAlpha=1-f,e.fillStyle=T,e.fillRect(t.x-k/2,t.y-S/2,k,S),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(j-y)*t.ovalScalar,Math.abs(N-w)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(u=t.x,h=t.y,x=Math.abs(j-y)*t.ovalScalar,p=Math.abs(N-w)*t.ovalScalar,g=Math.PI/10*t.wobble,e.save(),e.translate(u,h),e.rotate(g),e.scale(x,p),e.arc(0,0,1,0,2*Math.PI,void 0),e.restore());else if("star"===t.shape)for(var I=Math.PI/2*3,O=4*t.scalar,D=8*t.scalar,$=t.x,F=t.y,q=5,A=Math.PI/5;q--;)$=t.x+Math.cos(I)*D,F=t.y+Math.sin(I)*D,e.lineTo($,F),I+=A,$=t.x+Math.cos(I)*O,F=t.y+Math.sin(I)*O,e.lineTo($,F),I+=A;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(w)),e.lineTo(Math.floor(j),Math.floor(N)),e.lineTo(Math.floor(y),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(h,e)})).length?c=w.frame(e):t()}),d=t}),(i={addFettis:function(e){return u=u.concat(e),x},canvas:o,promise:x,reset:function(){c&&w.cancel(c),d&&d()}}).promise)}(r,f,N)}return x.reset=function(){d&&d.reset(),i&&i.reset()},x}function O(){return p||(p=I(null,{useWorker:!0,resize:!0})),p}r.exports=function(){return O().apply(this,arguments)},r.exports.reset=function(){O().reset()},r.exports.create=I,r.exports.shapeFromPath=function(e){if(!b)throw Error("path confetti are not supported in this browser");"string"==typeof e?a=e:(a=e.path,s=e.matrix);var t=new Path2D(a),r=document.createElement("canvas").getContext("2d");if(!s){for(var a,s,i,n,l=1e3,o=1e3,c=0,d=0,m=0;m<1e3;m+=2)for(var u=0;u<1e3;u+=2)r.isPointInPath(t,m,u,"nonzero")&&(l=Math.min(l,m),o=Math.min(o,u),c=Math.max(c,m),d=Math.max(d,u));var h=Math.min(10/(i=c-l),10/(n=d-o));s=[h,0,0,h,-Math.round(i/2+l)*h,-Math.round(n/2+o)*h]}return{type:"path",path:a,matrix:s}},r.exports.shapeFromText=function(e){var t,r=1,a="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,r="scalar"in e?e.scalar:r,s="fontFamily"in e?e.fontFamily:s,a="color"in e?e.color:a);var i=10*r,n=""+i+"px "+s,l=new OffscreenCanvas(i,i),o=l.getContext("2d");o.font=n;var c=o.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),m=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),u=c.actualBoundingBoxLeft+2,h=c.actualBoundingBoxAscent+2;d+=4,m+=4,(o=(l=new OffscreenCanvas(d,m)).getContext("2d")).font=n,o.fillStyle=a,o.fillText(t,u,h);var x=1/r;return{type:"bitmap",bitmap:l.transferToImageBitmap(),matrix:[x,0,0,x,-d*x/2,-m*x/2]}}}(function(){return"undefined"!=typeof self?self:this||{}}(),u,!1);let h=u.exports;function x({option1:e,option2:t,winner:r,onComplete:i}){let[n,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(0),[d,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(()=>{l(!0)},500);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{if(n){let e=setInterval(()=>{c(t=>t>=8?(clearInterval(e),l(!1),m(!0),setTimeout(()=>{i?.()},2e3),t):t+1)},300);return()=>clearInterval(e)}},[n,i]);let u=o%2==0?e:t,h=u===r;return(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\uD83E\uDE99 Random Winner Selection \uD83E\uDE99"}),a.jsx("p",{className:"text-gray-600",children:n?"Flipping the coin...":d?"Winner selected!":"Preparing to flip..."})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:`
            w-32 h-32 rounded-full border-4 border-yellow-400 bg-gradient-to-br from-yellow-300 to-yellow-500
            shadow-lg flex items-center justify-center text-center transition-all duration-300
            ${n?"animate-bounce":""}
            ${d&&h?"animate-pulse scale-110":""}
          `,style:{transform:n?`rotateY(${180*o}deg)`:"rotateY(0deg)"},children:a.jsx("div",{className:"text-sm font-bold text-yellow-900 px-2",children:u})}),a.jsx("div",{className:"w-32 h-4 bg-black opacity-20 rounded-full mt-2 transform scale-x-75"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md",children:[(0,a.jsxs)("div",{className:`
          p-4 rounded-lg border-2 text-center transition-all duration-300
          ${u===e&&n?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-gray-50"}
          ${d&&e===r?"border-green-400 bg-green-50 animate-pulse":""}
          ${d&&e!==r?"border-gray-300 bg-gray-100 opacity-50":""}
        `,children:[a.jsx("div",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Heads"})]}),(0,a.jsxs)("div",{className:`
          p-4 rounded-lg border-2 text-center transition-all duration-300
          ${u===t&&n?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-gray-50"}
          ${d&&t===r?"border-green-400 bg-green-50 animate-pulse":""}
          ${d&&t!==r?"border-gray-300 bg-gray-100 opacity-50":""}
        `,children:[a.jsx("div",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Tails"})]})]}),n&&a.jsx("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Flip ",o," of 8"]})}),d&&a.jsx("div",{className:"text-center animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-bold text-green-800 mb-2",children:"\uD83C\uDF89 Winner! \uD83C\uDF89"}),a.jsx("p",{className:"text-green-700 font-semibold",children:r})]})})]})}function p(){let{room:e,user:t,resetGame:r,createRoom:i}=(0,n.gT)(),[l,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1);if(!e||!t)return null;(0,s.useEffect)(()=>{e.winner&&!l&&(o(!0),e.randomWinner?m(!0):h({particleCount:100,spread:70,origin:{y:.6}}))},[e.winner,l,e.randomWinner]);let u=async()=>{try{let t=await i(e.category);window.location.href=`/rooms/${t}`}catch(e){console.error("Failed to create new room:",e)}},[p,g]=Object.keys(e.players),b=e.players[p],f=e.players[g];return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[d&&e.randomWinner&&e.winner&&a.jsx(x,{option1:e.finalOptions[0],option2:e.finalOptions[1],winner:e.winner,onComplete:()=>{m(!1),h({particleCount:100,spread:70,origin:{y:.6}})}}),(!d||!e.randomWinner)&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"\uD83C\uDF89 Winner! \uD83C\uDF89"}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-8 shadow-2xl border-4 border-yellow-300",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:e.winner}),a.jsx("p",{className:"text-yellow-100 text-lg",children:"is your final choice!"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:"Game Summary"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Final Options:"}),a.jsx("div",{className:"space-y-2",children:e.finalOptions.map((t,r)=>(0,a.jsxs)("div",{className:`p-3 rounded-lg ${t===e.winner?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-600"}`,children:[t,t===e.winner&&a.jsx("span",{className:"ml-2",children:"\uD83D\uDC51"})]},r))})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Votes:"}),a.jsx("div",{className:"space-y-2",children:Object.entries(e.players).map(([e,t])=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[t.displayName,":"]}),a.jsx("span",{className:"font-medium text-blue-600",children:t.vote})]},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(c,{player:b,label:`${b.displayName.split(" ")[0]} – Player 1`,isCurrent:!1,isSelf:p===t.uid,options:b.options,eliminated:b.eliminated,category:e.category,playerNumber:1}),a.jsx(c,{player:f,label:`${f.displayName.split(" ")[0]} – Player 2`,isCurrent:!1,isSelf:g===t.uid,options:f.options,eliminated:f.eliminated,category:e.category,playerNumber:2})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx("button",{onClick:u,className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Play Again"}),a.jsx("button",{onClick:()=>{r(),window.location.href="/"},className:"px-8 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"New Room"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-2",children:"Share this result:"}),a.jsx("div",{className:"flex justify-center space-x-2",children:a.jsx("button",{onClick:()=>{navigator.share?.({title:"Pick Duel Result",text:`We chose: ${e.winner}! Play Pick Duel at ${window.location.origin}`}).catch(()=>{navigator.clipboard.writeText(`We chose: ${e.winner}! Play Pick Duel at ${window.location.origin}`)})},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 transition-colors duration-200",children:"Share Result"})})]})]})}function g(){let{roomId:e}=(0,i.useParams)(),t=(0,i.useRouter)();(0,i.useSearchParams)();let{user:r,room:o,joinRoom:c,submitOptions:u,loading:h,error:x,resetGame:g}=(0,n.gT)(),[b,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{if(!r){t.replace(`/?redirectRoomId=${e}`);return}r&&e&&!w&&c(e).then(()=>j(!0)).catch(()=>{t.replace("/")})},[e,r,w]),(0,s.useEffect)(()=>{},[r,t]),!r)return null;if(!o)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mb-4"}),a.jsx("p",{className:"text-gray-700",children:"Loading room..."})]})});Object.keys(o.players),o.status;let N="playing"===o.status,M="voting"===o.status,C="complete"===o.status,P=o.players[r.uid],k=async e=>{await u(e),v(!0)};return a.jsx("main",{className:"min-h-screen flex flex-col items-center px-4 py-8 bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl bg-white rounded-2xl shadow-xl p-6 md:p-10 space-y-6 animate-fade-in",children:[a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-primary-700",children:["Room: ",a.jsx("span",{className:"font-mono text-lg",children:o.roomId})]}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Share this link with your friend to join:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("input",{type:"text",value:"",readOnly:!0,className:"w-full md:w-72 px-2 py-1 border rounded text-xs bg-gray-100"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),f(!0),setTimeout(()=>f(!1),2e3)},className:"px-3 py-1 text-xs bg-primary-600 text-white rounded hover:bg-primary-700",children:b?"Copied!":"Copy Link"})]})]})}),P&&3===P.options.length?(0,a.jsxs)(a.Fragment,{children:[N&&a.jsx(d,{}),M&&a.jsx(m,{}),C&&a.jsx(p,{})]}):a.jsx("div",{children:a.jsx(l,{onSubmit:k,disabled:P?.options.length===3||h,category:o.category})}),x&&a.jsx("div",{className:"text-center text-red-500 text-sm mt-2",children:x}),h&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Processing..."})]})]})})}u.exports.create},3052:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>n});let a=(0,r(6843).createProxy)(String.raw`/Users/wginsber/Desktop/projects/pick-duel-clean/app/rooms/[roomId]/page.tsx`),{__esModule:s,$$typeof:i}=a,n=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[242,386,114],()=>r(5514));module.exports=a})();