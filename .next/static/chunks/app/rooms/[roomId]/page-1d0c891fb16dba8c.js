(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{2872:function(e,t,l){Promise.resolve().then(l.bind(l,4298))},4298:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var r=l(7437),a=l(2265),s=l(4033),n=l(9467);function i(e){let{onSubmit:t,disabled:l=!1,category:s}=e,{user:i,room:o}=(0,n.gT)(),[d,c]=(0,a.useState)(["","",""]),[m,x]=(0,a.useState)(["","",""]),u=(e,t)=>{let l=[...d];l[e]=t,c(l);let r=[...m];r[e]="",x(r)},h=()=>{let e=["","",""],t=!0;d.forEach((l,r)=>{l.trim()?l.trim().length<2?(e[r]="Must be at least 2 characters",t=!1):l.trim().length>50&&(e[r]="Must be less than 50 characters",t=!1):(e[r]="This field is required",t=!1)});let l=d.map(e=>e.trim().toLowerCase());return new Set(l).size!==l.length&&(e.forEach((t,l)=>{e[l]||(e[l]="Duplicate options are not allowed")}),t=!1),x(e),t};return(0,r.jsxs)("div",{className:"w-full max-w-md mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Enter Your 3 ".concat(s&&"custom"===s.toLowerCase()?s:s&&"custom"!==s.toLowerCase()?s.charAt(0).toUpperCase()+s.slice(1):"Options")}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Put up your best options for voting"})]}),(0,r.jsx)("div",{className:"space-y-4",children:d.map((e,t)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>u(t,e.target.value),placeholder:"Option ".concat(t+1),disabled:l,className:"\n                w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\n                transition-all duration-200\n                ".concat(m[t]?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400","\n                ").concat(l?"opacity-50 cursor-not-allowed":"","\n              ")}),m[t]&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m[t]})]},t))}),(0,r.jsx)("button",{onClick:()=>{h()&&t(d.map(e=>e.trim()))},disabled:l||d.some(e=>!e.trim()),className:"\n          w-full py-3 px-6 rounded-lg font-semibold text-white\n          transition-all duration-200 transform hover:scale-105\n          ".concat(l||d.some(e=>!e.trim())?"bg-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 shadow-lg hover:shadow-xl","\n        "),children:l?"Waiting for other player...":"Submit Options"})]})}var o=l(4138);function d(e){let{player:t,label:l,isCurrent:a,isSelf:s,options:n,eliminated:i,onEliminate:d,disabled:c=!1,eliminationAck:m,revealElimination:x,flashOption:u,category:h="custom",playerNumber:g=1}=e,p=(0,o.bK)(h,g);return(0,r.jsxs)("div",{className:"\n      bg-white rounded-lg p-4 shadow-md border-2 transition-all duration-200\n      ".concat(a?"border-primary-500":"border-gray-200","\n      ").concat(a?"animate-pulse-glow":"","\n      ").concat(c?"opacity-60":"","\n    "),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-gray-200 text-lg bg-gray-100",children:p}),s&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary-500 rounded-full border border-white"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-800 text-sm truncate",children:[l,s&&(0,r.jsx)("span",{className:"text-primary-600 ml-1",children:"(You)"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:a?"Your turn":"Waiting..."})]})]}),n.length>0&&(0,r.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>{let l=i.includes(e),a=u===e;return(0,r.jsx)("div",{className:"\n                  px-2 py-1 rounded text-xs transition-all duration-300\n                  ".concat(a?"bg-yellow-200 border-yellow-400 animate-flash":"","\n                  ").concat(l&&!a?"bg-gray-100 text-gray-500 line-through":l||a?"":"bg-green-100 text-green-700","\n                "),children:e},t)})}),t.vote&&(0,r.jsxs)("div",{className:"mt-3 p-2 bg-blue-100 rounded text-xs",children:[(0,r.jsx)("p",{className:"font-medium text-blue-800",children:"Voted for:"}),(0,r.jsx)("p",{className:"text-blue-700",children:t.vote})]})]})}function c(){var e,t,l,s,i;let c;let{room:m,user:x,eliminateOption:u,acknowledgeEliminationReveal:h,loading:g}=(0,n.gT)(),[p,b]=(0,a.useState)(null);if((0,a.useEffect)(()=>{var e;if(m&&(null===(e=m.revealElimination)||void 0===e?void 0:e.option)){b(m.revealElimination.option);let e=setTimeout(()=>{b(null)},700);return()=>clearTimeout(e)}},[null==m?void 0:null===(e=m.revealElimination)||void 0===e?void 0:e.option]),!m||!x)return null;let y=(0,o.yu)(m),v=y===x.uid;(0,o.oK)(m,y||"");let j=(0,o.RC)(m.eliminationStep),f=async e=>{v&&!g&&await u(e)},N=async()=>{g||await h()},w=m.createdBy,k=Object.keys(m.players).find(e=>e!==w)||"",S=m.players[w],C=m.players[k],E=m.revealElimination&&!(null===(t=m.eliminationAck)||void 0===t?void 0:t[x.uid]),P=m.eliminationAck&&Object.values(m.eliminationAck).every(Boolean),O=m.revealElimination&&!P;return(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Elimination Phase"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:j}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,r.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(m.eliminationStep/4*100,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Step ",m.eliminationStep," of 4"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(d,{player:S,label:"".concat(S.displayName.split(" ")[0]," – Player 1"),isCurrent:y===w,isSelf:(null==x?void 0:x.uid)===w,options:S.options,eliminated:S.eliminated,onEliminate:f,disabled:y!==w||(null==x?void 0:x.uid)!==w,eliminationAck:void 0,revealElimination:void 0,flashOption:p,category:m.category,playerNumber:1}),C?(0,r.jsx)(d,{player:C,label:"".concat(C.displayName.split(" ")[0]," – Player 2"),isCurrent:y===k,isSelf:(null==x?void 0:x.uid)===k,options:C.options,eliminated:C.eliminated,onEliminate:f,disabled:y!==k||(null==x?void 0:x.uid)!==k,eliminationAck:void 0,revealElimination:void 0,flashOption:p,category:m.category,playerNumber:2}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[120px] bg-gray-50 rounded-lg border-2 border-dashed border-gray-200 text-gray-400",children:[(0,r.jsx)("span",{className:"text-lg font-semibold mb-2",children:"Waiting for Player 2..."}),(0,r.jsx)("span",{className:"text-xs",children:"Share the room link to invite a friend!"})]})]}),v&&!O&&C&&3===C.options.length&&(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border-2 border-primary-500",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Choose an option to eliminate:"}),(0,r.jsx)("div",{className:"grid gap-3",children:(c=1===m.eliminationStep?C:2===m.eliminationStep?S:3===m.eliminationStep?S:4===m.eliminationStep?C:null)?c.options.map(e=>{let t=c.eliminated.includes(e),l=p===e;return(0,r.jsx)("button",{onClick:()=>f(e),disabled:g||t,className:"\n                      p-4 rounded-lg border-2 transition-all duration-200\n                      ".concat(l?"bg-yellow-200 border-yellow-400 animate-flash":"","\n                      ").concat(t&&!l?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed line-through":t||l?"":"bg-red-50 border-red-300 hover:bg-red-100 hover:border-red-400 text-red-700 font-medium hover:scale-105 hover:shadow-lg","\n                    "),children:e},e)}):null})]}),!v&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"animate-pulse text-blue-600",children:["Waiting for ",(null===(s=m.players[y||""])||void 0===s?void 0:null===(l=s.displayName)||void 0===l?void 0:l.split(" ")[0])||"other player"," to make their choice..."]})})}),g&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Processing..."})]}),E&&(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:"Elimination Revealed!"}),(0,r.jsxs)("p",{className:"text-yellow-700 mb-4",children:[(0,r.jsx)("strong",{children:null===(i=m.players[m.revealElimination.by])||void 0===i?void 0:i.displayName})," eliminated: ",(0,r.jsx)("strong",{children:m.revealElimination.option})]}),(0,r.jsx)("button",{onClick:N,disabled:g,className:"bg-yellow-600 text-white px-6 py-2 rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:g?"Processing...":"Acknowledge"})]}),m.revealElimination&&!E&&!P&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center",children:(0,r.jsx)("div",{className:"animate-pulse text-blue-600",children:"Waiting for other player to acknowledge the elimination..."})})]})}function m(){let{room:e,user:t,vote:l,loading:a}=(0,n.gT)();if(!e||!t)return null;let s=e.players[t.uid],i=(null==s?void 0:s.vote)!==null,d=(e.voteRound||1)>1,c=!!e.randomWinner,m=e.votingTurn===t.uid,x=e.createdBy,u=Object.keys(e.players).find(e=>e!==x)||"";e.players[x],e.players[u];let h=e.finalOptions,g={};for(let t of Object.keys(e.players)){let l=e.players[t],r=l.options.filter(e=>!l.eliminated.includes(e));1===r.length&&(g[r[0]]=t)}let p=2===h.length,b=Object.values(e.players).every(e=>null!==e.vote),y=p?!i:m&&!i,v=async e=>{i||a||await l(e)};return(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:p?"Final Vote":"Vote"}),(0,r.jsx)("p",{className:"text-gray-600",children:p?"Vote for your favorite from the two remaining options below":"Vote for your favorite option"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:p?"Simultaneous voting - both players vote at the same time!":d?"Revote: You disagreed! Try again.":"First vote"})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:h.map((t,l)=>{let n=g[t],i=e.players[n].displayName.split(" ")[0],d="".concat(i," – ").concat(n===x?"Player 1":"Player 2"),c=!p||b,m=c&&(null==s?void 0:s.vote)===t;return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("span",{className:"mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:d}),(0,r.jsx)("div",{className:"\n                  w-full bg-white rounded-xl p-6 shadow-lg border-2 transition-all duration-200 cursor-pointer\n                  ".concat(m?"border-green-500 bg-green-50":"border-primary-500 hover:border-primary-600 hover:shadow-xl","\n                  ").concat(!y||a?"opacity-60 cursor-not-allowed":"","\n                "),onClick:y&&!a?()=>v(t):void 0,children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:(0,o.bK)(e.category||"custom",n===x?1:2)}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t}),c&&(null==s?void 0:s.vote)===t&&(0,r.jsx)("div",{className:"text-green-600 font-semibold",children:"✓ Your Vote"}),c&&(null==s?void 0:s.vote)&&(null==s?void 0:s.vote)!==t&&(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:"Not selected"})]})})]},n)})}),p?(0,r.jsxs)(r.Fragment,{children:[!i&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-yellow-700",children:"Please cast your vote by clicking one of the options above"})})}),i&&!b&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsx)("div",{className:"animate-pulse text-blue-600",children:"Waiting for the other player to vote..."})})})]}):(0,r.jsxs)(r.Fragment,{children:[!m&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsx)("div",{className:"animate-pulse text-blue-600",children:"Waiting for the other player to vote..."})})}),!i&&m&&!a&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-yellow-700",children:"Please cast your vote by clicking one of the options above"})})}),i&&!b&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsx)("div",{className:"animate-pulse text-blue-600",children:"Waiting for other player to vote..."})})}),d&&!c&&!b&&(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-orange-700 font-semibold",children:"You disagreed! Please revote. If you disagree again, a random winner will be chosen."})})}),c&&(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-700 font-semibold",children:"A random winner will be selected due to a stalemate!"})})})]}),a&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Processing vote..."})]})]})}var x=l(8034);function u(e){let{option1:t,option2:l,winner:s,onComplete:n}=e,[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(0),[m,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(()=>{o(!0)},500);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{if(i){let e=setInterval(()=>{c(t=>t>=8?(clearInterval(e),o(!1),x(!0),setTimeout(()=>{null==n||n()},2e3),t):t+1)},300);return()=>clearInterval(e)}},[i,n]);let u=d%2==0?t:l,h=u===s;return(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\uD83E\uDE99 Random Winner Selection \uD83E\uDE99"}),(0,r.jsx)("p",{className:"text-gray-600",children:i?"Flipping the coin...":m?"Winner selected!":"Preparing to flip..."})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"\n            w-32 h-32 rounded-full border-4 border-yellow-400 bg-gradient-to-br from-yellow-300 to-yellow-500\n            shadow-lg flex items-center justify-center text-center transition-all duration-300\n            ".concat(i?"animate-bounce":"","\n            ").concat(m&&h?"animate-pulse scale-110":"","\n          "),style:{transform:i?"rotateY(".concat(180*d,"deg)"):"rotateY(0deg)"},children:(0,r.jsx)("div",{className:"text-sm font-bold text-yellow-900 px-2",children:u})}),(0,r.jsx)("div",{className:"w-32 h-4 bg-black opacity-20 rounded-full mt-2 transform scale-x-75"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"\n          p-4 rounded-lg border-2 text-center transition-all duration-300\n          ".concat(u===t&&i?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-gray-50","\n          ").concat(m&&t===s?"border-green-400 bg-green-50 animate-pulse":"","\n          ").concat(m&&t!==s?"border-gray-300 bg-gray-100 opacity-50":"","\n        "),children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:t}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Heads"})]}),(0,r.jsxs)("div",{className:"\n          p-4 rounded-lg border-2 text-center transition-all duration-300\n          ".concat(u===l&&i?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-gray-50","\n          ").concat(m&&l===s?"border-green-400 bg-green-50 animate-pulse":"","\n          ").concat(m&&l!==s?"border-gray-300 bg-gray-100 opacity-50":"","\n        "),children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:l}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Tails"})]})]}),i&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Flip ",d," of 8"]})}),m&&(0,r.jsx)("div",{className:"text-center animate-fade-in",children:(0,r.jsxs)("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-green-800 mb-2",children:"\uD83C\uDF89 Winner! \uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-green-700 font-semibold",children:s})]})})]})}function h(){let{room:e,user:t,resetGame:l,createRoom:s}=(0,n.gT)(),[i,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1);if(!e||!t)return null;(0,a.useEffect)(()=>{e.winner&&!i&&(o(!0),e.randomWinner?m(!0):(0,x.Z)({particleCount:100,spread:70,origin:{y:.6}}))},[e.winner,i,e.randomWinner]);let h=async()=>{try{let t=await s(e.category);window.location.href="/rooms/".concat(t)}catch(e){console.error("Failed to create new room:",e)}},[g,p]=Object.keys(e.players),b=e.players[g],y=e.players[p];return(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[c&&e.randomWinner&&e.winner&&(0,r.jsx)(u,{option1:e.finalOptions[0],option2:e.finalOptions[1],winner:e.winner,onComplete:()=>{m(!1),(0,x.Z)({particleCount:100,spread:70,origin:{y:.6}})}}),(!c||!e.randomWinner)&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"\uD83C\uDF89 Winner! \uD83C\uDF89"}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-8 shadow-2xl border-4 border-yellow-300",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:e.winner}),(0,r.jsx)("p",{className:"text-yellow-100 text-lg",children:"is your final choice!"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:"Game Summary"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Final Options:"}),(0,r.jsx)("div",{className:"space-y-2",children:e.finalOptions.map((t,l)=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(t===e.winner?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-600"),children:[t,t===e.winner&&(0,r.jsx)("span",{className:"ml-2",children:"\uD83D\uDC51"})]},l))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Votes:"}),(0,r.jsx)("div",{className:"space-y-2",children:Object.entries(e.players).map(e=>{let[t,l]=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[l.displayName,":"]}),(0,r.jsx)("span",{className:"font-medium text-blue-600",children:l.vote})]},t)})})]})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsx)(d,{player:b,label:"".concat(b.displayName.split(" ")[0]," – Player 1"),isCurrent:!1,isSelf:g===t.uid,options:b.options,eliminated:b.eliminated,category:e.category,playerNumber:1}),(0,r.jsx)(d,{player:y,label:"".concat(y.displayName.split(" ")[0]," – Player 2"),isCurrent:!1,isSelf:p===t.uid,options:y.options,eliminated:y.eliminated,category:e.category,playerNumber:2})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsx)("button",{onClick:h,className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Play Again"}),(0,r.jsx)("button",{onClick:()=>{l(),window.location.href="/"},className:"px-8 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"New Room"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Share this result:"}),(0,r.jsx)("div",{className:"flex justify-center space-x-2",children:(0,r.jsx)("button",{onClick:()=>{var t,l;null===(t=(l=navigator).share)||void 0===t||t.call(l,{title:"Pick Duel Result",text:"We chose: ".concat(e.winner,"! Play Pick Duel at ").concat(window.location.origin)}).catch(()=>{navigator.clipboard.writeText("We chose: ".concat(e.winner,"! Play Pick Duel at ").concat(window.location.origin))})},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 transition-colors duration-200",children:"Share Result"})})]})]})}function g(){let{roomId:e}=(0,s.useParams)(),t=(0,s.useRouter)();(0,s.useSearchParams)();let{user:l,room:o,joinRoom:d,submitOptions:x,loading:u,error:g,resetGame:p}=(0,n.gT)(),[b,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[f,N]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(!l){t.replace("/?redirectRoomId=".concat(e));return}l&&e&&!f&&d(e).then(()=>N(!0)).catch(()=>{t.replace("/")})},[e,l,f]),(0,a.useEffect)(()=>{if(l){let e=new URLSearchParams(window.location.search).get("redirectRoomId");e&&t.replace("/rooms/".concat(e))}},[l,t]),!l)return null;if(!o)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mb-4"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Loading room..."})]})});Object.keys(o.players),o.status;let w="playing"===o.status,k="voting"===o.status,S="complete"===o.status,C=o.players[l.uid],E=async e=>{await x(e),j(!0)};return(0,r.jsx)("main",{className:"min-h-screen flex flex-col items-center px-4 py-8 bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,r.jsxs)("div",{className:"w-full max-w-3xl bg-white rounded-2xl shadow-xl p-6 md:p-10 space-y-6 animate-fade-in",children:[(0,r.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-primary-700",children:["Room: ",(0,r.jsx)("span",{className:"font-mono text-lg",children:o.roomId})]}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"Share this link with your friend to join:"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)("input",{type:"text",value:window.location.href,readOnly:!0,className:"w-full md:w-72 px-2 py-1 border rounded text-xs bg-gray-100"}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),y(!0),setTimeout(()=>y(!1),2e3)},className:"px-3 py-1 text-xs bg-primary-600 text-white rounded hover:bg-primary-700",children:b?"Copied!":"Copy Link"})]})]})}),C&&3===C.options.length?(0,r.jsxs)(r.Fragment,{children:[w&&(0,r.jsx)(c,{}),k&&(0,r.jsx)(m,{}),S&&(0,r.jsx)(h,{})]}):(0,r.jsx)("div",{children:(0,r.jsx)(i,{onSubmit:E,disabled:(null==C?void 0:C.options.length)===3||u,category:o.category})}),g&&(0,r.jsx)("div",{className:"text-center text-red-500 text-sm mt-2",children:g}),u&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Processing..."})]})]})})}}},function(e){e.O(0,[358,572,21,34,467,971,938,744],function(){return e(e.s=2872)}),_N_E=e.O()}]);