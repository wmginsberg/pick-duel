(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1595:function(e,t,s){Promise.resolve().then(s.bind(s,6911))},6911:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),l=s(2265),o=s(4033),r=s(9467),n=s(1077),i=s(4499),c=s(4086);let d=["Movies","Cuisines","Restaurants","Travel Destinations","Names","Custom"];function m(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)(),{user:s,createRoom:m,joinRoom:u,loading:x}=(0,r.gT)(),[h,g]=(0,l.useState)(""),[p,f]=(0,l.useState)(d[0]),[b,y]=(0,l.useState)(""),[w,j]=(0,l.useState)(""),[N,v]=(0,l.useState)(""),[k,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(s){let s=t.get("redirectRoomId");s&&e.replace("/rooms/".concat(s))}},[s,t,e]),(0,l.useEffect)(()=>{let e=t.get("redirectRoomId");e?(async()=>{let t=(0,c.JU)(i.db,"rooms",e),s=await (0,c.QT)(t);s.exists()?C(s.id):C(e)})():C(null)},[t]);let R=async()=>{await (0,r.qj)()},S=async()=>{j("");let t=p;if("Custom"===p){if(!b.trim()){j("Please enter a custom category.");return}t=b.trim()}try{let s=await m(t),a="".concat(window.location.origin,"/rooms/").concat(s);v(a),e.push("/rooms/".concat(s))}catch(e){j("Failed to create room.")}},D=async t=>{if(t.preventDefault(),j(""),!(0,n.f)(h)){j("Room IDs must be in the format: spicy-tiger-echo (two hyphens, all lowercase)");return}try{await u(h),e.push("/rooms/".concat(h))}catch(e){j("Failed to join room.")}};return(0,a.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center px-4 py-12 bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,a.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-8 animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)("img",{src:"/logo.svg",alt:"Pick Duel Logo",className:"w-16 h-16 mb-2"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary-700",children:"Pick Duel"}),(0,a.jsx)("p",{className:"text-gray-600 text-center",children:"A fun two-player game to help you make decisions together. Secretly enter options, eliminate, then vote!"})]}),s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsx)("select",{value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:x,children:d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),"Custom"===p&&(0,a.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),className:"w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your custom category...",disabled:x})]}),(0,a.jsx)("button",{onClick:S,className:"w-full py-3 px-6 rounded-lg font-semibold text-white bg-green-600 hover:bg-green-700 transition-colors duration-200 shadow-lg hover:shadow-xl",disabled:x,children:"Create New Room"}),N&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Room URL"}),(0,a.jsx)("input",{type:"text",value:N,readOnly:!0,className:"w-full px-3 py-2 border rounded bg-gray-100 text-xs"})]})]}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Join Room by ID"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g. spicy-tiger-echo",disabled:x}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Room IDs must be in the format: ",(0,a.jsx)("span",{className:"font-mono",children:"spicy-tiger-echo"})," (two hyphens, all lowercase)"]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 px-6 rounded-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200 shadow-lg hover:shadow-xl",disabled:x,children:"Join Room"})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[k&&(0,a.jsxs)("div",{className:"w-full text-center bg-blue-50 border border-blue-200 text-blue-700 rounded-lg px-4 py-2 mb-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Sign in to join room:"})," ",(0,a.jsx)("span",{className:"font-mono",children:k})]}),(0,a.jsxs)("button",{onClick:R,className:"w-full py-3 px-6 rounded-lg font-semibold text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 shadow-lg hover:shadow-xl flex items-center justify-center gap-2",disabled:x,children:[(0,a.jsx)("img",{src:"/google.svg",alt:"Google",className:"w-5 h-5"}),"Sign in with Google"]})]}),w&&(0,a.jsx)("div",{className:"text-center text-red-500 text-sm mt-2",children:w})]}),(0,a.jsxs)("div",{className:"mt-8 text-gray-400 text-xs text-center",children:["\xa9 ",new Date().getFullYear()," Pick Duel. All rights reserved."]})]})}}},function(e){e.O(0,[358,572,21,467,971,938,744],function(){return e(e.s=1595)}),_N_E=e.O()}]);